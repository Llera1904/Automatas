import graphviz as gv
def graph(states, alphabet, transition, ini, end):
    g = gv.Digraph(format='png', filename='Buscador')
    g.graph_attr['rankdir'] = 'LR'
    g.node("ini", shape="point")

    if states[0]:
        g.edge("ini", states[0])

    # Crea los nodos de las ciudades
    for i in range(len(states)):
        if i not in end:
            g.node(states[i])

    for state in end:
        g.node(state, shape="doublecircle")

    for state in states:
        for symbol in alphabet:
            next_state = transition(state, symbol)
            if next_state != None:
                g.edge(state, next_state, label=symbol)
            else:
                g.edge(state, "1", label='E-')
    
    g.view()

def transition(state, symbol):
    transition_table = dictionary
    return transition_table.get(state, {}).get(symbol, None)


dictionary = {'1': {'c': '2', 'd': '37', 'g': '50'}, '2': {'c':'2','d':'37','g':'50','a': '3', 'o': '18', 'u': '28'}, 
'3': {'c':'2','d':'37','g':'50','l': '4', 'n': '11'}, '4': {'c':'2','d':'37','g':'50','e': '5'}, 
'5': {'c':'2','d':'37','g':'50','n': '6'}, '6': {'c':'2','d':'37','g':'50','t': '7'}, 
'7': {'c':'2','d':'37','g':'50','u': '8'}, '8': {'c':'2','d':'37','g':'50','r': '9'}, 
'9': {'c':'2','d':'37','g':'50','a': '10'},  '10': {'c':'2','d':'37','g':'50'}, 
'11': {'c':'2','d':'37','g':'50','s': '12'}, '12': {'c':'2','d':'37','g':'50','a': '13'}, 
'13': {'c':'2','d':'37','g':'50','n': '14'}, '14': {'d':'37','g':'50','c': '15'}, 
'15': {'c':'2','d':'37','g':'50','i': '16'}, '16': {'c':'2','d':'37','g':'50','o': '17'}, 
'17': {'c':'2','d':'37','g':'50'}, '18': {'c':'2','d':'37','g':'50','n': '19', 'v': '25'}, 
'19': {'c':'2','d':'37','g':'50','t': '20'}, '20': {'c':'2','d':'37','g':'50','a': '21'}, 
'21': {'c':'2','d':'37','g': '22'}, '22': {'c':'2','d':'37','g':'50','i': '23'}, 
'23': {'c':'2','d':'37','g':'50','o': '24'}, '24': {'c':'2','d':'37','g':'50'}, 
'25': {'c':'2','d':'37','g':'50','i': '26'}, '26': {'d': '27','c':'2','g':'50'}, 
'27': {'c':'2','d':'37','g':'50'}, '28': {'c':'2','d':'37','g':'50','b': '29'}, 
'29': {'c':'2','d':'37','g':'50','r': '30'}, '30': {'c':'2','d':'37','g':'50','e': '31'}, 
'31': {'c':'2','d':'37','g':'50','b': '32'}, '32': {'c':'2','d':'37','g':'50','o': '33'}, 
'33': {'c': '34','d':'37','g':'50'}, '34': {'c':'2','d':'37','g':'50','a': '35'}, 
'35': {'c':'2','d':'37','g':'50','s': '36'}, '36': {'c':'2','d':'37','g':'50'}, 
'37': {'c':'2','d':'37','g':'50','i': '38', 'o': '46'}, '38': {'c':'2','d':'37','g':'50','s': '39'}, 
'39': {'c':'2','d':'37','g':'50','t': '40'}, '40': {'c':'2','d':'37','g':'50','a': '41'}, 
'41': {'c':'2','d':'37','g':'50','n': '42'}, '42': {'c': '43','d':'37','g':'50'}, 
'43': {'c':'2','d':'37','g':'50','i': '44'}, '44': {'c':'2','d':'37','g':'50','a': '45'}, 
'45': {'c':'2','d':'37','g':'50'}, '46': {'c':'2','d':'37','g':'50','l': '47'}, 
'47': {'c':'2','d':'37','g':'50','o': '48'}, '48': {'c':'2','d':'37','g':'50','r': '49'}, 
'49': {'c':'2','d':'37','g':'50'}, '50': {'c':'2','d':'37','g':'50','r': '51'}, 
'51': {'c':'2','d':'37','g':'50','i': '52'}, '52': {'c':'2','d':'37','g':'50','p': '53'}, 
'53': {'c':'2','d':'37','g':'50','a': '54'}, '54': {'c':'2','d':'37','g':'50'}} 


states = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', 
    '21', '22', '23', '24', '25', '26', '27', '28', '29', '30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '40', 
    '41', '42', '43', '44', '45', '46', '47', '48', '49', '50', '51', '52', '53', '54']

alphabet = ['c', 'a', 'l', 'e', 'n', 't', 'u', 'r', 's', 'i', 'o', 'g', 'v', 'd', 'b', 'p']

initial_state = '1'
final_states = ['10', '17', '24', '27', '45', '49', '36', '54']

graph(states, alphabet, transition, initial_state, final_states)



